## EMQX Log Configuration
## =====================

## Console Handler - Primary logging to stdout
log.console_handler {
    enable = true
    level = debug
    time_offset = "+00:00"
    charset = utf8
    formatter = text
    single_line = false
    sync_mode_qlen = 100
    drop_mode_qlen = 3000
    flush_qlen = 8000
    overload_kill {
        enable = true
        max_heap_size = 1MB
        kill_restart_after = 2s
    }
}

## File Handler - Backup logging to file
log.file_handlers {
    default {
        enable = false
        level = debug
        time_offset = "+00:00"
        charset = utf8
        formatter = text
        single_line = false
        sync_mode_qlen = 100
        drop_mode_qlen = 3000
        flush_qlen = 8000
        rotation {
            enable = true
            max_size = 50MB
            count = 5
        }
        rotation_on_size = 100MB
        rotation_count = 5
        max_depth = 100
        overload_kill {
            enable = true
            max_heap_size = 1MB
            kill_restart_after = 2s
        }
    }
}

## Logger Configuration
log.logger {
    level = debug
    handlers = [console_handler]
}

## Specific Logger Levels for MQTT Events
log.logger.emqx.mqtt {
    level = debug
    handlers = [console_handler]
}

log.logger.emqx.connection {
    level = debug
    handlers = [console_handler]
}

log.logger.emqx.session {
    level = debug
    handlers = [console_handler]
}

log.logger.emqx.pubsub {
    level = debug
    handlers = [console_handler]
}

log.logger.emqx.auth {
    level = debug
    handlers = [console_handler]
}

log.logger.emqx.access {
    level = debug
    handlers = [console_handler]
}
